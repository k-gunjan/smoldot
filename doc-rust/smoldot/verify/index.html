<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Methods that verify whether a block is correct."><meta name="keywords" content="rust, rustlang, rust-lang, verify"><title>smoldot::verify - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../../normalize.css"><link rel="stylesheet" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../../ayu.css" disabled><link rel="stylesheet" href="../../dark.css" disabled><link rel="stylesheet" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../smoldot/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../smoldot/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module verify</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#modules">Modules</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../smoldot/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><button type="button">?</button></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div></div></form></nav></div><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">smoldot</a>::<wbr><a class="mod" href="#">verify</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/smoldot/verify.rs.html#18-73">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Methods that verify whether a block is correct.</p>
<h2 id="description"><a href="#description">Description</a></h2>
<p>When a block is received from the network (or any other untrusted source), this block should
first be verified.</p>
<p>Two possibilities are offered:</p>
<ul>
<li>Verifying the authenticity of the block, using only its header and the ancestor blocks’
headers.</li>
<li>Verifying both the validity and authenticity of the block, using.the block’s header and
body, the headers of the ancestors, and storage of its parent.</li>
</ul>
<blockquote>
<p><strong>Note</strong>: The body of a block consists in the list of its extrinsics. An extrinsic is
either an intrinsic (added by the block’s author) or a transaction.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong>: The option of verifying only the authenticity of a block, and not its validity,
is normally for situations where a block’s body or the parent block’s storage is
not known. If the parent storage and the block’s body are known, it is encouraged
that the block’s validity be checked as well.</p>
</blockquote>
<p>Verifying the authenticity of a block consists in verifying the consensus digest logs found
in its header in order to make sure that the author of the block was authorized to produce it.
Whether the block has been correctly crafted isn’t and cannot be verified with only the
header.</p>
<p>Verifying the block’s validity consists, in addition to verifying its header, in <em>executing</em>
the block. This involves calling the <code>BlockBuilder_check_inherents</code> and <code>Core_execute_block</code>
runtime functions, passing as parameter the header and body of the block, and providing access
to the storage of the parent block. The runtime verifies that the header and body are correct.</p>
<h2 id="trust"><a href="#trust">Trust</a></h2>
<p>Verifying only the authenticity of a block, and not its validity, means that the author of
the block is trusted to have generated a correct block.</p>
<p>Situations where the block author had the right to generate a block but created an invalid
block would result in a loss of money for this author, and are therefore most likely the
consequence of a bug (either on the side of the block author or on the side of the local
verification code).</p>
<p>However, if the blocks’ validity isn’t verified, it is possible for a block author to target
a weak implementation by directly connecting to it and announcing invalid blocks directly
to it. Consequently, if blocks are for example used to verify whether a payment has gone
through, it is preferable to wait for blocks to have been finalized.</p>
<p>No matter the validity of a block, keep in mind that a reorg (a “reorganization”) might
happen, and many valid blocks don’t get finalized.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="aura/index.html" title="smoldot::verify::aura mod">aura</a></div><div class="item-right docblock-short">AURA consensus.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="babe/index.html" title="smoldot::verify::babe mod">babe</a></div><div class="item-right docblock-short">BABE consensus.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="header_body/index.html" title="smoldot::verify::header_body mod">header_body</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="header_only/index.html" title="smoldot::verify::header_only mod">header_only</a></div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="inherents/index.html" title="smoldot::verify::inherents mod">inherents</a></div><div class="item-right docblock-short">Inherents, together with transactions, form the body of a block.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="smoldot" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.65.0 (897e37553 2022-11-02)" ></div></body></html>